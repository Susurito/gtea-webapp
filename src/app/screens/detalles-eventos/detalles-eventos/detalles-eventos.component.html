<div class="app-layout">
  <app-sidebar></app-sidebar>
  <div class="content-area">
    <main class="gestion-container">
      <section class="event-detail-page" *ngIf="eventData as event">

        <button class="back-button" (click)="goBack()">
          <span aria-hidden="true">&leftarrow;</span> Volver a Eventos
        </button>

        <article class="event-container">

          <header class="header-section">
            <figure class="image-placeholder" [style.background-image]="'url(' + event.imageUrl + ')'">
            </figure>

            <div class="title-bar">
              <div>
                <h1>{{ event.title }}</h1>
                <div class="info-tags">
                  <span class="badge badge-category">{{ event.category }}</span>
                  <span
                    class="badge"
                    [ngClass]="getStateClass(event.status)"
                    role="status"
                  >{{ event.status }}</span>
                </div>
              </div>

              <button
                class="action-button"
                (click)="inscribirse()"
                [disabled]="event.isRegistered || event.capacityAvailable <= 0"
                [attr.aria-label]="event.isRegistered ? 'Ya estás inscrito' : event.capacityAvailable > 0 ? 'Inscribirse al evento' : 'Cupo lleno, no se puede inscribir'"
              >
                <span *ngIf="event.isRegistered">Inscrito ✔️</span>
                <span *ngIf="!event.isRegistered && event.capacityAvailable > 0">Inscribirse</span>
                <span *ngIf="!event.isRegistered && event.capacityAvailable <= 0">Cupo Lleno</span>
              </button>
            </div>
          </header>

          <section class="details-grid">

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['fecha'] }}</span>
              <div class="text-content">
                <div class="label">Fecha</div>
                <div class="value">{{ event.date }}</div>
              </div>
            </div>

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['horario'] }}</span>
              <div class="text-content">
                <div class="label">Horario</div>
                <div class="value">{{ event.time }}</div>
              </div>
            </div>

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['sede'] }}</span>
              <div class="text-content">
                <div class="label">Sede</div>
                <div class="value">{{ event.venue }}</div>
              </div>
            </div>

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['cupo'] }}</span>
              <div class="text-content">
                <div class="label">Cupo Disponible</div>
                <div class="value">{{ event.capacityAvailable }} de {{ event.capacityTotal }} inscritos</div>
              </div>
            </div>

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['organizador'] }}</span>
              <div class="text-content">
                <div class="label">Organizador</div>
                <div class="value">{{ event.organizer }}</div>
              </div>
            </div>

            <div class="detail-item">
              <span class="icon" aria-hidden="true">{{ iconMap['modalidad'] }}</span>
              <div class="text-content">
                <div class="label">Modalidad</div>
                <div class="value">{{ event.modality }}</div>
              </div>
            </div>sss
          </section>

          <section class="content-section">

            <h3>Descripción</h3>
            <p class="description-text">{{ event.description }}</p>

            <h3>Requisitos</h3>
            <ul class="requirements-list">
              <li *ngFor="let req of event.requirements">{{ req }}</li>
            </ul>

          </section>
        </article>

      </section>
    </main>
  </div>
</div>
