<div class="app-layout">
  <app-sidebar></app-sidebar>
  <div class="content-area">
    <main class="categories-container">
      <div class="header-section">
        <h1 class="page-title">Gestión de Categorías</h1>
        <button class="action-button" (click)="crearCategoria()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="icon-add">
            <path fill-rule="evenodd"
              d="M12 3.75a.75.75 0 01.75.75v6.75h6.75a.75.75 0 010 1.5h-6.75v6.75a.75.75 0 01-1.5 0v-6.75H4.5a.75.75 0 010-1.5h6.75V4.5a.75.75 0 01.75-.75z"
              clip-rule="evenodd" />
          </svg>
          Nueva Categoría
        </button>
      </div>

      <!-- Sección de Tarjetas de Resumen (Métricas) -->
      <div class="metrics-grid">
        <!-- Tarjeta 1: Total Categorías -->
        <div class="metric-card">
          <p class="card-label">Total Categorías</p>
          <!-- VALOR DINÁMICO -->
          <p class="card-value">{{ totalCategorias }}</p>
        </div>

        <!-- Tarjeta 2: Categoría Más Usada -->
        <div class="metric-card">
          <p class="card-label">Categoría Más Usada</p>
          <!-- VALOR DINÁMICO -->
          <p class="card-value">{{ categoriaMasUsada }}</p>
        </div>

        <!-- Tarjeta 3: Total Eventos -->
        <div class="metric-card">
          <p class="card-label">Total Eventos</p>
          <!-- VALOR DINÁMICO -->
          <p class="card-value">{{ totalEventos }}</p>
        </div>
      </div>

      <!-- Sección de la Tabla de Datos -->
      <div class="data-table-container">
        <table>
          <!-- Encabezado de la Tabla -->
          <thead>
            <tr>
              <th class="col-name">Nombre</th>
              <th class="col-description">Descripción</th>
              <th class="col-events">Eventos</th>
              <th class="col-actions">Acciones</th>
            </tr>
          </thead>
          <!-- Cuerpo de la Tabla (Dinamizado) -->
          <tbody>
            <tr *ngFor="let categoria of categorias">
              <td class="cell-name">{{ categoria.nombre }}</td>
              <td class="cell-description">{{ categoria.descripcion }}</td>
              <td class="cell-events">{{ categoria.eventos }}</td>
              <td class="cell-actions">
                <button class="icon-button edit" (click)="editarCategoria(categoria.id)">
                  <!-- Icono de Editar -->
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                    <path
                      d="M5.433 13.917V17.5h3.583L17.2 9.283l-3.583-3.583L5.433 13.917zM18.817 7.667l-2.167-2.167a1 1 0 00-1.414 0L14 6.89l3.583 3.583 1.234-1.234a1 1 0 000-1.414z" />
                  </svg>
                </button>
                <button class="icon-button delete" (click)="eliminarCategoria(categoria.id, categoria.nombre)">
                  <!-- Icono de Eliminar -->
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4">
                    <path fill-rule="evenodd"
                      d="M8.75 1A2.75 2.75 0 006 3.75v.5H4.5a.75.75 0 000 1.5h.75v8.75A2.75 2.75 0 008.5 17h3a2.75 2.75 0 002.75-2.75V5.75h.75a.75.75 0 000-1.5H15V3.75A2.75 2.75 0 0012.25 1h-3.5zm-1.5 2.75a1.25 1.25 0 011.25-1.25h3.5a1.25 1.25 0 011.25 1.25v.5h-6V3.75zM9 8a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 019 8zm3.25 0a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5a.75.75 0 01.75-.75z"
                      clip-rule="evenodd" />
                  </svg>
                </button>
              </td>
            </tr>
            <tr *ngIf="categorias.length === 0">
                <td colspan="4" style="text-align: center; padding: 20px; color: #777;">
                    No hay categorías registradas.
                </td>
            </tr>
          </tbody>
        </table>
      </div>

    </main>
  </div>
</div>
